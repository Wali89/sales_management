
<h1><strong> <%= @item.name %></strong></h1>
<p><strong>Description:</strong> <%= @item.description %></p>
<p><strong>Price:</strong> <%= number_to_currency(@item.price) %></p>
<p><strong>Category:</strong> <%= @item.category %></p>

   <% @deals.each do |deal| %>
    <h3><%= link_to deal.name, deal_path(deal) %></h3>
    <div id="deal-<%= deal.id %>"><%= truncate(deal.message) %></div>
    <button class="js-more" data-id="<%= deal.id %>">More Info</button>
  <% end %>

<p><strong> <%= link_to "Create New Deal", new_item_deal_path(@item) %> </strong></p>

<%= link_to "Load Deals", item_deals_path(@deal), class: "load_deals" %>

<div id="deals_div">
  <ol>
  </ol>
</div>

<script type="text/javascript" charset="utf-8">
$(function() {
  $(".js-more").on("click", function() {
    var id = $(this).data("id");
    $.get("/deals/" + id + ".json", function(data) {
      var deal = data;
      var descriptionText = "<p>" + deal["message"] + "</p>";
      $("#deal-" + id).html(descriptionText);
    });
  });


});
function Deal(attributes){
  this.id = attributes.id
  this.name = attributes.name
  this.user = attributes.user
  this.price = attribute.price  
}

Deal.prototype.renderLI = function(){

  let html = '<li>' + this.user.name + 'has a deal for:' + this.price + '</li>'
  $("#deals_div ol").append(html)
} 
</script>